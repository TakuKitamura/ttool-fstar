<?xml version="1.0" encoding="utf-8" ?>
<nta>
<declaration>
//Global declarations

//Declarations used for non synchronized gates
urgent chan makeChoice;
urgent chan RemoteControl__encrypt;
urgent chan RemoteControl__decrypt;
urgent chan RemoteControl__sencrypt;
urgent chan RemoteControl__sdecrypt;
urgent chan RemoteControl__MAC;
urgent chan RemoteControl__verifyMAC;
urgent chan RemoteControl__concat2;
urgent chan RemoteControl__concat3;
urgent chan RemoteControl__concat4;
urgent chan RemoteControl__get2;
urgent chan RemoteControl__get3;
urgent chan RemoteControl__get4;
urgent chan Bell__runBell;
urgent chan Controller__startCooking;
urgent chan Controller__durationModified;
urgent chan Magnetron__ON;
urgent chan Magnetron__OFF;
urgent chan Door__openM;
urgent chan Door__closeM;
urgent chan WirelessInterface__encrypt;
urgent chan WirelessInterface__decrypt;
urgent chan WirelessInterface__sencrypt;
urgent chan WirelessInterface__sdecrypt;
urgent chan WirelessInterface__MAC;
urgent chan WirelessInterface__verifyMAC;
urgent chan WirelessInterface__concat2;
urgent chan WirelessInterface__concat3;
urgent chan WirelessInterface__concat4;
urgent chan WirelessInterface__get2;
urgent chan WirelessInterface__get3;
urgent chan WirelessInterface__get4;

//Declarations for synchronous channels
urgent chan Controller_obs_open__ObserverProp1_obs_open;
urgent chan Controller_obs_closed__ObserverProp1_obs_closed;
urgent chan Controller_obs_magnetronStart__ObserverProp1_obs_magnetronStart;
urgent chan WirelessInterface_remoteStart__MicroWaveOven_remoteStart;
urgent chan RemotelyControlledMicrowave_wirelessChannelRead__RemotelyControlledMicrowave_wirelessChannelWrite;
urgent chan Controller_ringBell__Bell_ring;
urgent chan Door_open__Controller_open;
urgent chan Door_closed__Controller_closed;
urgent chan Controller_startMagnetron__Magnetron_startM;
urgent chan Controller_stopMagnetron__Magnetron_stopM;
urgent chan ControlPanel_LEDOn__Controller_startCooking;
urgent chan ControlPanel_LEDoff__Controller_stopCooking;
urgent chan ControlPanel_startButton__Controller_start;

// Global parameters for method calls and signal exchange
int actionint__0;
int actionint__1;


int min(int x, int y) {
  if(x&lt;y) {
    return x;
  }
  return y;
}

int max(int x, int y) {
  if(x&lt;y) {
    return y;
  }
  return x;
}
</declaration>
<template>
<name>ObserverProp1</name>
<parameter></parameter>
<declaration>clock h__;
</declaration>
<location id="id0" x="-100" y="30">
<name x="-90" y="35">id0</name>
</location>
<location id="id2" x="10" y="-80">
<name x="20" y="-75">id2</name>
</location>
<location id="id3" x="15" y="-10">
<name x="25" y="-5">id3</name>
<committed />
</location>
<location id="id4" x="20" y="60">
<name x="30" y="65">id4</name>
</location>
<init ref="id0" />
<transition>
<source ref="id0" />
<target ref="id0" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="-42" y="-195">Controller_obs_magnetronStart__ObserverProp1_obs_magnetronStart?</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="-47" y="-164" />
<nail x="-37" y="-129" />
</transition>
<transition>
<source ref="id0" />
<target ref="id2" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="-40" y="-160">Controller_obs_open__ObserverProp1_obs_open?</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="-30" y="-127" />
</transition>
<transition>
<source ref="id2" />
<target ref="id3" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="17" y="-55">Controller_obs_magnetronStart__ObserverProp1_obs_magnetronStart?</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="17" y="-36" />
</transition>
<transition>
<source ref="id3" />
<target ref="id4" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="0" y="0"></label>
<nail x="32" y="6" />
</transition>
<transition>
<source ref="id2" />
<target ref="id0" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="22" y="15">Controller_obs_closed__ObserverProp1_obs_closed?</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="-6" y="49" />
</transition>
</template>
<template>
<name>RemotelyControlledMicrowave</name>
<parameter></parameter>
<declaration>clock h__;
</declaration>
<location id="id6" x="-100" y="-220">
<name x="-90" y="-215">id6</name>
</location>
<init ref="id6" />
</template>
<template>
<name>RemoteControl</name>
<parameter></parameter>
<declaration>int duration = 12;
int msg1__data = 0;
int PSK__data = 0;
int msg__data = 0;
clock h__;
</declaration>
<location id="id7" x="-100" y="0">
<name x="-90" y="5">id7</name>
<committed />
</location>
<location id="id8" x="5" y="-150">
<name x="15" y="-145">id8</name>
<urgent />
</location>
<location id="id9" x="10" y="-80">
<name x="20" y="-75">id9</name>
</location>
<location id="id10" x="15" y="-10">
<name x="25" y="-5">id10</name>
</location>
<init ref="id7" />
<transition>
<source ref="id7" />
<target ref="id8" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="-37" y="-185">msg1__data = duration</label>
<nail x="-49" y="-163" />
</transition>
<transition>
<source ref="id8" />
<target ref="id9" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="12" y="-125">RemoteControl__sencrypt!</label>
<label kind="assignment" x="17" y="-115">actionint__0 =msg1__data,
actionint__1 =PSK__data</label>
<nail x="15" y="-138" />
</transition>
<transition>
<source ref="id9" />
<target ref="id10" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="17" y="-55">RemotelyControlledMicrowave_wirelessChannelRead__RemotelyControlledMicrowave_wirelessChannelWrite!</label>
<label kind="assignment" x="22" y="-45">actionint__0 = msg__data</label>
<nail x="3" y="-57" />
</transition>
</template>
<template>
<name>MicroWaveOven</name>
<parameter></parameter>
<declaration>clock h__;
</declaration>
<location id="id11" x="-100" y="-220">
<name x="-90" y="-215">id11</name>
</location>
<init ref="id11" />
</template>
<template>
<name>Bell</name>
<parameter></parameter>
<declaration>clock h__;
</declaration>
<location id="id12" x="-100" y="0">
<name x="-90" y="5">id12</name>
</location>
<location id="id13" x="5" y="-150">
<name x="15" y="-145">id13</name>
<urgent />
</location>
<init ref="id12" />
<transition>
<source ref="id12" />
<target ref="id13" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="-42" y="-195">Controller_ringBell__Bell_ring?</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="-69" y="-183" />
</transition>
<transition>
<source ref="id13" />
<target ref="id12" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="12" y="-125">Bell__runBell!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="18" y="-137" />
</transition>
</template>
<template>
<name>ControlPanel</name>
<parameter></parameter>
<declaration>int duration = 9;
clock h__;
</declaration>
<location id="id15" x="-100" y="-220">
<name x="-90" y="-215">id15</name>
</location>
<init ref="id15" />
<transition>
<source ref="id15" />
<target ref="id15" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="-42" y="-195">ControlPanel_startButton__Controller_start!</label>
<label kind="assignment" x="-37" y="-185">actionint__0 = duration</label>
<nail x="-65" y="-161" />
</transition>
</template>
<template>
<name>Controller</name>
<parameter></parameter>
<declaration>int duration = 5;
int remainingTime = 0;
clock h__;
</declaration>
<location id="id17" x="-100" y="1220">
<name x="-90" y="1225">id17</name>
</location>
<location id="id18" x="5" y="-150">
<name x="15" y="-145">id18</name>
</location>
<location id="id19" x="10" y="-80">
<name x="20" y="-75">id19</name>
<committed />
</location>
<location id="id20" x="15" y="-10">
<name x="25" y="-5">id20</name>
<urgent />
</location>
<location id="id21" x="20" y="60">
<name x="30" y="65">id21</name>
</location>
<location id="id22" x="25" y="130">
<name x="35" y="135">id22</name>
<committed />
</location>
<location id="id23" x="30" y="200">
<name x="40" y="205">id23</name>
<label kind="invariant"  x="35" y="215">(h__ &lt;= 1) &amp;&amp; (h__ &lt;= 1)</label>
</location>
<location id="id24" x="35" y="270">
<name x="45" y="275">id24</name>
</location>
<location id="id25" x="40" y="340">
<name x="50" y="345">id25</name>
</location>
<location id="id26" x="45" y="410">
<name x="55" y="415">id26</name>
</location>
<location id="id28" x="205" y="550">
<name x="215" y="555">id28</name>
<label kind="invariant"  x="210" y="565">h__ &lt;= 1</label>
</location>
<location id="id29" x="210" y="620">
<name x="220" y="625">id29</name>
<committed />
</location>
<location id="id30" x="215" y="690">
<name x="225" y="695">id30</name>
<urgent />
</location>
<location id="id33" x="380" y="900">
<name x="390" y="905">id33</name>
</location>
<location id="id34" x="385" y="970">
<name x="395" y="975">id34</name>
<committed />
</location>
<location id="id35" x="390" y="1040">
<name x="400" y="1045">id35</name>
<urgent />
</location>
<location id="id36" x="395" y="1110">
<name x="405" y="1115">id36</name>
</location>
<location id="id38" x="255" y="1250">
<name x="265" y="1255">id38</name>
<label kind="invariant"  x="260" y="1265">h__ &lt;= 1</label>
</location>
<location id="id40" x="415" y="1390">
<name x="425" y="1395">id40</name>
</location>
<location id="id42" x="125" y="1530">
<name x="135" y="1535">id42</name>
<committed />
</location>
<location id="id43" x="130" y="1600">
<name x="140" y="1605">id43</name>
<committed />
</location>
<location id="id44" x="135" y="1670">
<name x="145" y="1675">id44</name>
<label kind="invariant"  x="140" y="1685">(h__ &lt;= (9))</label>
</location>
<location id="id46" x="145" y="1810">
<name x="155" y="1815">id46</name>
</location>
<location id="id47" x="150" y="1880">
<name x="160" y="1885">id47</name>
</location>
<location id="id48" x="155" y="1950">
<name x="165" y="1955">id48</name>
</location>
<location id="id49" x="160" y="2020">
<name x="170" y="2025">id49</name>
</location>
<location id="id50" x="165" y="2090">
<name x="175" y="2095">id50</name>
</location>
<location id="id51" x="170" y="2160">
<name x="180" y="2165">id51</name>
</location>
<location id="id53" x="180" y="2300">
<name x="190" y="2305">id53</name>
</location>
<location id="id54" x="185" y="2370">
<name x="195" y="2375">id54</name>
</location>
<location id="id55" x="190" y="2440">
<name x="200" y="2445">id55</name>
</location>
<init ref="id17" />
<transition>
<source ref="id17" />
<target ref="id18" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="-42" y="-195">WirelessInterface_remoteStart__MicroWaveOven_remoteStart?</label>
<label kind="assignment" x="-37" y="-185">duration = actionint__0</label>
<nail x="-69" y="-191" />
</transition>
<transition>
<source ref="id18" />
<target ref="id19" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="12" y="-125">Controller_startMagnetron__Magnetron_startM!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="-7" y="-117" />
</transition>
<transition>
<source ref="id19" />
<target ref="id20" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="22" y="-45">remainingTime=duration</label>
<nail x="-5" y="-48" />
</transition>
<transition>
<source ref="id20" />
<target ref="id21" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="22" y="15">Controller__startCooking!</label>
<label kind="assignment" x="27" y="25">actionint__0 =remainingTime</label>
<nail x="3" y="45" />
</transition>
<transition>
<source ref="id21" />
<target ref="id22" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="27" y="85">Controller_obs_magnetronStart__ObserverProp1_obs_magnetronStart!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="36" y="92" />
</transition>
<transition>
<source ref="id22" />
<target ref="id23" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="37" y="165">h__ = 0</label>
<nail x="26" y="160" />
</transition>
<transition>
<source ref="id23" />
<target ref="id26" />
<label kind="guard" x="40" y="320">remainingTime==0</label>
<label kind="synchronisation" x="45" y="330">Controller_stopMagnetron__Magnetron_stopM!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="59" y="315" />
</transition>
<transition>
<source ref="id23" />
<target ref="id28" />
<label kind="guard" x="117" y="355">h__ &gt;= 1</label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="0" y="0"></label>
<nail x="132" y="387" />
</transition>
<transition>
<source ref="id28" />
<target ref="id24" />
<label kind="guard" x="120" y="390">remainingTime&gt;0</label>
<label kind="synchronisation" x="125" y="400">makeChoice!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="113" y="405" />
</transition>
<transition>
<source ref="id24" />
<target ref="id29" />
<label kind="guard" x="122" y="425">remainingTime&gt;0</label>
<label kind="synchronisation" x="127" y="435">makeChoice!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="145" y="462" />
</transition>
<transition>
<source ref="id29" />
<target ref="id30" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="222" y="655">remainingTime= remainingTime -1</label>
<nail x="221" y="670" />
</transition>
<transition>
<source ref="id30" />
<target ref="id22" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="222" y="715">Controller__durationModified!</label>
<label kind="assignment" x="227" y="725">actionint__0 =remainingTime</label>
<nail x="233" y="704" />
</transition>
<transition>
<source ref="id28" />
<target ref="id26" />
<label kind="guard" x="215" y="670">remainingTime==0</label>
<label kind="synchronisation" x="220" y="680">Controller_stopMagnetron__Magnetron_stopM!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="226" y="675" />
</transition>
<transition>
<source ref="id28" />
<target ref="id33" />
<label kind="guard" x="292" y="705">h__ &gt;= 1</label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="0" y="0"></label>
<nail x="305" y="724" />
</transition>
<transition>
<source ref="id33" />
<target ref="id24" />
<label kind="guard" x="207" y="565">remainingTime&gt;0</label>
<label kind="synchronisation" x="212" y="575">makeChoice!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="219" y="607" />
</transition>
<transition>
<source ref="id33" />
<target ref="id25" />
<label kind="guard" x="210" y="600">remainingTime &gt; 0</label>
<label kind="synchronisation" x="215" y="610">makeChoice!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="196" y="622" />
</transition>
<transition>
<source ref="id25" />
<target ref="id34" />
<label kind="guard" x="212" y="635">remainingTime &gt; 0</label>
<label kind="synchronisation" x="217" y="645">makeChoice!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="192" y="664" />
</transition>
<transition>
<source ref="id34" />
<target ref="id35" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="397" y="1005">remainingTime=remainingTime -1</label>
<nail x="395" y="1008" />
</transition>
<transition>
<source ref="id35" />
<target ref="id36" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="397" y="1065">Controller__durationModified!</label>
<label kind="assignment" x="402" y="1075">actionint__0 =remainingTime</label>
<nail x="380" y="1051" />
</transition>
<transition>
<source ref="id33" />
<target ref="id26" />
<label kind="guard" x="390" y="1020">remainingTime==0</label>
<label kind="synchronisation" x="395" y="1030">Controller_stopMagnetron__Magnetron_stopM!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="365" y="1034" />
</transition>
<transition>
<source ref="id23" />
<target ref="id38" />
<label kind="guard" x="142" y="705">h__ &gt;= 1</label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="0" y="0"></label>
<nail x="140" y="748" />
</transition>
<transition>
<source ref="id38" />
<target ref="id25" />
<label kind="guard" x="147" y="775">remainingTime &gt; 0</label>
<label kind="synchronisation" x="152" y="785">makeChoice!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="145" y="814" />
</transition>
<transition>
<source ref="id38" />
<target ref="id26" />
<label kind="guard" x="257" y="1265">remainingTime==0</label>
<label kind="synchronisation" x="262" y="1275">Controller_stopMagnetron__Magnetron_stopM!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="274" y="1268" />
</transition>
<transition>
<source ref="id38" />
<target ref="id40" />
<label kind="guard" x="335" y="1300">h__ &gt;= 1</label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="0" y="0"></label>
<nail x="359" y="1324" />
</transition>
<transition>
<source ref="id40" />
<target ref="id24" />
<label kind="guard" x="225" y="810">remainingTime&gt;0</label>
<label kind="synchronisation" x="230" y="820">makeChoice!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="239" y="817" />
</transition>
<transition>
<source ref="id40" />
<target ref="id25" />
<label kind="guard" x="227" y="845">remainingTime &gt; 0</label>
<label kind="synchronisation" x="232" y="855">makeChoice!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="239" y="866" />
</transition>
<transition>
<source ref="id40" />
<target ref="id26" />
<label kind="guard" x="417" y="1405">remainingTime==0</label>
<label kind="synchronisation" x="422" y="1415">Controller_stopMagnetron__Magnetron_stopM!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="412" y="1429" />
</transition>
<transition>
<source ref="id26" />
<target ref="id42" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="90" y="960">Controller_ringBell__Bell_ring!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="97" y="958" />
</transition>
<transition>
<source ref="id42" />
<target ref="id43" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="0" y="0"></label>
<nail x="107" y="1556" />
</transition>
<transition>
<source ref="id43" />
<target ref="id44" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="142" y="1635">h__ = 0</label>
<nail x="121" y="1653" />
</transition>
<transition>
<source ref="id44" />
<target ref="id17" />
<label kind="guard" x="137" y="1685">(h__ &gt;= (5))</label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="0" y="0"></label>
<nail x="112" y="1691" />
</transition>
<transition>
<source ref="id36" />
<target ref="id46" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="275" y="1450">Door_open__Controller_open?</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="273" y="1461" />
</transition>
<transition>
<source ref="id46" />
<target ref="id47" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="152" y="1835">Controller_obs_open__ObserverProp1_obs_open!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="143" y="1855" />
</transition>
<transition>
<source ref="id47" />
<target ref="id48" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="157" y="1905">Controller_stopMagnetron__Magnetron_stopM!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="169" y="1921" />
</transition>
<transition>
<source ref="id48" />
<target ref="id49" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="162" y="1975">Door_closed__Controller_closed?</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="146" y="1971" />
</transition>
<transition>
<source ref="id49" />
<target ref="id50" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="167" y="2045">Controller_obs_closed__ObserverProp1_obs_closed!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="184" y="2063" />
</transition>
<transition>
<source ref="id50" />
<target ref="id51" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="172" y="2115">Controller_startMagnetron__Magnetron_startM!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="147" y="2102" />
</transition>
<transition>
<source ref="id51" />
<target ref="id22" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="177" y="2185">Controller_obs_magnetronStart__ObserverProp1_obs_magnetronStart!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="195" y="2190" />
</transition>
<transition>
<source ref="id17" />
<target ref="id53" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="45" y="1030">Door_open__Controller_open?</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="17" y="1035" />
</transition>
<transition>
<source ref="id53" />
<target ref="id54" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="187" y="2325">Controller_obs_open__ObserverProp1_obs_open!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="188" y="2311" />
</transition>
<transition>
<source ref="id54" />
<target ref="id55" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="192" y="2395">Door_closed__Controller_closed?</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="194" y="2398" />
</transition>
<transition>
<source ref="id55" />
<target ref="id17" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="197" y="2465">Controller_obs_closed__ObserverProp1_obs_closed!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="189" y="2489" />
</transition>
<transition>
<source ref="id17" />
<target ref="id18" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="55" y="1170">ControlPanel_startButton__Controller_start?</label>
<label kind="assignment" x="60" y="1180">duration = actionint__0</label>
<nail x="48" y="1167" />
</transition>
</template>
<template>
<name>Magnetron</name>
<parameter></parameter>
<declaration>int power = 0;
clock h__;
</declaration>
<location id="id58" x="-100" y="0">
<name x="-90" y="5">id58</name>
</location>
<location id="id59" x="5" y="-150">
<name x="15" y="-145">id59</name>
<urgent />
</location>
<location id="id60" x="10" y="-80">
<name x="20" y="-75">id60</name>
</location>
<location id="id61" x="15" y="-10">
<name x="25" y="-5">id61</name>
<urgent />
</location>
<init ref="id58" />
<transition>
<source ref="id58" />
<target ref="id59" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="-42" y="-195">Controller_startMagnetron__Magnetron_startM?</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="-24" y="-200" />
</transition>
<transition>
<source ref="id59" />
<target ref="id60" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="12" y="-125">Magnetron__ON!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="-11" y="-131" />
</transition>
<transition>
<source ref="id60" />
<target ref="id61" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="17" y="-55">Controller_stopMagnetron__Magnetron_stopM?</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="1" y="-51" />
</transition>
<transition>
<source ref="id61" />
<target ref="id58" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="22" y="15">Magnetron__OFF!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="4" y="2" />
</transition>
</template>
<template>
<name>Door</name>
<parameter></parameter>
<declaration>clock h__;
</declaration>
<location id="id63" x="-100" y="170">
<name x="-90" y="175">id63</name>
<committed />
</location>
<location id="id64" x="5" y="-150">
<name x="15" y="-145">id64</name>
<label kind="invariant"  x="10" y="-135">h__ &lt;= 3</label>
</location>
<location id="id65" x="10" y="-80">
<name x="20" y="-75">id65</name>
</location>
<location id="id66" x="165" y="-10">
<name x="175" y="-5">id66</name>
</location>
<location id="id68" x="25" y="130">
<name x="35" y="135">id68</name>
<committed />
</location>
<location id="id69" x="30" y="200">
<name x="40" y="205">id69</name>
<label kind="invariant"  x="35" y="215">h__ &lt;= 3</label>
</location>
<location id="id70" x="35" y="270">
<name x="45" y="275">id70</name>
</location>
<location id="id71" x="190" y="340">
<name x="200" y="345">id71</name>
</location>
<init ref="id63" />
<transition>
<source ref="id63" />
<target ref="id64" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="-37" y="-185">h__ = 0</label>
<nail x="-71" y="-169" />
</transition>
<transition>
<source ref="id64" />
<target ref="id66" />
<label kind="guard" x="85" y="-100">h__ &gt;= 2</label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="0" y="0"></label>
<nail x="74" y="-86" />
</transition>
<transition>
<source ref="id66" />
<target ref="id65" />
<label kind="guard" x="167" y="5"></label>
<label kind="synchronisation" x="172" y="15">Door_open__Controller_open!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="170" y="38" />
</transition>
<transition>
<source ref="id65" />
<target ref="id68" />
<label kind="guard" x="17" y="5"></label>
<label kind="synchronisation" x="22" y="15">Door__openM!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="16" y="41" />
</transition>
<transition>
<source ref="id68" />
<target ref="id69" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="37" y="165">h__ = 0</label>
<nail x="16" y="180" />
</transition>
<transition>
<source ref="id69" />
<target ref="id71" />
<label kind="guard" x="110" y="250">h__ &gt;= 2</label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="0" y="0"></label>
<nail x="112" y="269" />
</transition>
<transition>
<source ref="id71" />
<target ref="id70" />
<label kind="guard" x="192" y="355"></label>
<label kind="synchronisation" x="197" y="365">Door_closed__Controller_closed!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="214" y="366" />
</transition>
<transition>
<source ref="id70" />
<target ref="id63" />
<label kind="guard" x="42" y="355"></label>
<label kind="synchronisation" x="47" y="365">Door__closeM!</label>
<label kind="assignment" x="0" y="0"></label>
<nail x="29" y="376" />
</transition>
</template>
<template>
<name>WirelessInterface</name>
<parameter></parameter>
<declaration>int msg2__data = 0;
int PSK__data = 0;
int selectedDuration = 0;
int msg3__data = 0;
clock h__;
</declaration>
<location id="id74" x="-100" y="30">
<name x="-90" y="35">id74</name>
</location>
<location id="id75" x="5" y="-150">
<name x="15" y="-145">id75</name>
</location>
<location id="id76" x="10" y="-80">
<name x="20" y="-75">id76</name>
<committed />
</location>
<location id="id77" x="15" y="-10">
<name x="25" y="-5">id77</name>
</location>
<location id="id78" x="20" y="60">
<name x="30" y="65">id78</name>
</location>
<init ref="id74" />
<transition>
<source ref="id74" />
<target ref="id75" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="-42" y="-195">RemotelyControlledMicrowave_wirelessChannelRead__RemotelyControlledMicrowave_wirelessChannelWrite?</label>
<label kind="assignment" x="-37" y="-185">msg2__data = actionint__0</label>
<nail x="-52" y="-174" />
</transition>
<transition>
<source ref="id75" />
<target ref="id76" />
<label kind="guard" x="7" y="-135"></label>
<label kind="synchronisation" x="12" y="-125">WirelessInterface__sdecrypt!</label>
<label kind="assignment" x="17" y="-115">actionint__0 =msg2__data,
actionint__1 =PSK__data</label>
<nail x="-18" y="-95" />
</transition>
<transition>
<source ref="id76" />
<target ref="id77" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="0" y="0"></label>
<label kind="assignment" x="22" y="-45">selectedDuration = msg3__data</label>
<nail x="29" y="-44" />
</transition>
<transition>
<source ref="id77" />
<target ref="id78" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="22" y="15">WirelessInterface_remoteStart__MicroWaveOven_remoteStart!</label>
<label kind="assignment" x="27" y="25">actionint__0 = selectedDuration</label>
<nail x="1" y="16" />
</transition>
</template>
<template>
<name>Nonsync__actions</name>
<parameter></parameter>
<declaration></declaration>
<location id="id79" x="0" y="-220">
<name x="10" y="-215">id79</name>
</location>
<init ref="id79" />
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">makeChoice?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__encrypt?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__decrypt?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__sencrypt?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__sdecrypt?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__MAC?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__verifyMAC?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__concat2?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__concat3?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__concat4?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__get2?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__get3?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">RemoteControl__get4?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">Bell__runBell?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">Controller__startCooking?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">Controller__durationModified?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">Magnetron__ON?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">Magnetron__OFF?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">Door__openM?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">Door__closeM?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__encrypt?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__decrypt?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__sencrypt?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__sdecrypt?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__MAC?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__verifyMAC?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__concat2?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__concat3?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__concat4?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__get2?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__get3?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
<transition>
<source ref="id79" />
<target ref="id79" />
<label kind="guard" x="0" y="0"></label>
<label kind="synchronisation" x="5" y="-230">WirelessInterface__get4?</label>
<label kind="assignment" x="0" y="0"></label>
</transition>
</template>
<system>
//Instanciation 
ObserverProp1__0 = ObserverProp1();
RemoteControl__1 = RemoteControl();
Bell__2 = Bell();
ControlPanel__3 = ControlPanel();
Controller__4 = Controller();
Magnetron__5 = Magnetron();
Door__6 = Door();
WirelessInterface__7 = WirelessInterface();
Nonsync__actions__8 = Nonsync__actions();
system ObserverProp1__0,RemoteControl__1,Bell__2,ControlPanel__3,Controller__4,Magnetron__5,Door__6,WirelessInterface__7,Nonsync__actions__8;</system>
</nta>
