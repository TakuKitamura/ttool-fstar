INCLUDE "toto.cplib"
INCLUDE "/home/enrici/TURTLE/parser/totoo.cplib"
INCLUDE "TURTLE/parser/toto.cplib"
INCLUDE "./TURTLE/parser/toto.cplib"

SampleScenario( sourceMEM, destMEM, mainCPU, bus )

COMMUNICATION_PATTERN SampleCP1
	ACTIVITY sc1, sc2, sc3
	INT toto = 5
	BOOL boolean = FALSE
	#toto = 1
	#boolean = FALSE

	MAIN
	<>; {sc1 ; { sc2 * {sc3[cond0] * sc4}} ; {sc5[cond1 && [cond2 || cond3]]}}
	<sc1, sc2, sc3>; {sc5 * sc6}[ condition ] 
	END
END

START ACTIVITY SampleActivity2
	ACTIVITY sc1, sc2, sc3
	INT toto = 5
	BOOL boolean = FALSE
	#toto = 1
	#boolean = FALSE

	MAIN
	<>; {sc1 ; { sc2 * {sc3[cond0] * sc4}} ; {sc5[cond1 && [cond2 || cond3]]}}
	<sc1, sc2, sc3>; {sc5 * sc6}[ condition ] 
	END
END

START ACTIVITY SampleActivity3
	SCENARIO sc1, sc2, sc3
	INT toto = 5
	BOOL boolean = FALSE
	#toto = 1
	#boolean = FALSE

	MAIN
	<>; {sc1 ; { sc2 * {sc3[cond0] * sc4}} ; {sc5[cond1 && [cond2 || cond3]]}}
	<sc1, sc2, sc3>; {sc5 * sc6}[ condition ] 
	END
END

SCENARIO SampleScenario1
	#Supernodes declaration
	
	STORAGE SRCstorage, DSTstorage
	CONTROLLER Controller
	TRANSFER Transfer1
	
	#Declaration of variables for action parameters
	INT SIZE
	INT ID1

	SIZE = 1024 	#1024 items will be transferred
	ID1 = 0				#label used to distinguish the belonging to a particular	scenario, maybe it is not needed!

	#List of actions, syntax is: ActionName( SRC_actor, DST_actor, list of parameters )

	MAIN
		TransferRequest( Controller, Transfer1, ID1, SIZE );
		Transfer( Transfer1, SRCstorage, ID1, SIZE );
		Transfer( SRCstorage, Transfer1, ID1, SIZE );
		Transfer( Transfer1, DSTstorage, ID1, SIZE );
		TransferDone( Transfer1, Controller, ID1 );
	END
END

SCENARIO SampleScenario2
	#Supernodes declaration
	
	STORAGE SRCstorage, DSTstorage
	CONTROLLER Controller
	TRANSFER Transfer1
	
	#Declaration of variables for action parameters
	INT SIZE
	INT ID1

	SIZE = 1024 	#1024 items will be transferred
	ID1 = 0				#label used to distinguish the belonging to a particular	scenario, maybe it is not needed!

	#List of actions, syntax is: ActionName( SRC_actor, DST_actor, list of parameters )

	MAIN
		TransferRequest( Controller, Transfer1, ID1, SIZE );
		Transfer( Transfer1, SRCstorage, ID1, SIZE );
		Transfer( SRCstorage, Transfer1, ID1, SIZE );
		Transfer( Transfer1, DSTstorage, ID1, SIZE );
		TransferDone( Transfer1, Controller, ID1 );
	END
END
#up to now I am parsing (only parsing, no semantic check) variable must be separately declared and initialized.
